# 盈利面积可视化

## 核心洞察

投资收益可以分解为两个维度的乘积：

```
盈利额 = 价格涨幅 × 持有仓位
       = (ATH - 平均成本) × 总仓位
```

这本质上是一个**面积**，可以用矩形来可视化。

## 策略形态对比

| 策略 | 平均成本 | 涨幅空间 | 持仓量 | 形态 |
|------|----------|----------|--------|------|
| 金字塔 | 低 | 大 | 小 | 瘦高型 |
| 线性 | 中 | 中 | 中 | 方形 |
| 倒金字塔 | 高 | 小 | 大 | 矮胖型 |

关键洞察：**三种策略可能有相似的面积（盈利额），但形态完全不同**。

## 可视化设计

### 坐标系

```
Y轴: 价格涨幅 (ATH - avgCost)
     ↑
     │  ┌─────┐
     │  │     │  ← 盈利面积
     │  │     │
     │  └─────┘
     └──────────→ X轴: 持仓量 (BTC)
```

### 网格划分

将面积划分为等值网格，每格代表固定盈利额（如 $1,000）：
- 格子越多 = 盈利越高
- 直观感知"赚了多少个格子"

### 多策略对比

并排显示不同策略的矩形，直观对比：
- 高度差 = 涨幅空间差异（成本优势）
- 宽度差 = 仓位差异（资金利用率）
- 面积差 = 最终盈利差异

## 实现思路

1. **单策略视图**：当前策略的盈利矩形 + 网格
2. **对比视图**：三种预设策略并排，高亮当前选中
3. **动态更新**：反弹价格变化时，高度随之变化（部分仓位未成交时）

## 交互细节

- 鼠标悬停显示：涨幅 $X × 仓位 Y BTC = 盈利 $Z
- 网格数量标注：共 N 格，每格 $1,000
- 策略切换时矩形形态平滑过渡动画

## 技术实现

使用 CSS/SVG 绘制：
- 矩形高度 = `(ath - avgCost) / maxGain * containerHeight`
- 矩形宽度 = `position / maxPosition * containerWidth`
- 网格线 = CSS background-image 或 SVG pattern
